<div class="doc-container">
  <nav class="breadcrumb">
    <a routerLink="/home">üè† Accueil</a>
    <span class="separator">‚Ä∫</span>
    <a routerLink="/documentation">üìö Documentation</a>
    <span class="separator">‚Ä∫</span>
    <span class="current">Reactive Forms</span>
  </nav>

  <header class="doc-header">
    <h1>üìù Reactive Forms</h1>
    <p class="lead">Formulaires r√©actifs bas√©s sur RxJS pour une gestion d'√©tat pr√©visible</p>
  </header>

  <section class="doc-section">
    <h2>Qu'est-ce qu'un Reactive Form ?</h2>
    <p>
      Les <strong>Reactive Forms</strong> (formulaires r√©actifs) fournissent une approche bas√©e sur les mod√®les pour g√©rer les entr√©es de formulaire dont les valeurs changent au fil du temps. Ils utilisent une approche explicite et immutable pour g√©rer l'√©tat des formulaires √† un moment donn√©.
    </p>
    
    <div class="info-box">
      <h3>üéØ Principes Cl√©s</h3>
      <ul>
        <li><strong>Model-driven</strong> : La logique du formulaire est d√©finie dans le composant TypeScript</li>
        <li><strong>Reactive</strong> : Utilise des Observables pour g√©rer l'√©tat du formulaire</li>
        <li><strong>Immutable</strong> : Chaque changement produit un nouvel √©tat</li>
        <li><strong>Testable</strong> : Pas de d√©pendance au DOM, facile √† tester</li>
      </ul>
    </div>
  </section>

  <section class="doc-section">
    <h2>Classes Principales</h2>
    <div class="card-grid">
      <div class="feature-card">
        <h3>FormControl</h3>
        <p>Repr√©sente un seul champ de formulaire. G√®re la valeur, l'√©tat de validation et les interactions utilisateur.</p>
        <div class="code-block">
          <pre><code>const name = new FormControl('John', Validators.required);</code></pre>
        </div>
      </div>

      <div class="feature-card">
        <h3>FormGroup</h3>
        <p>Groupe plusieurs contr√¥les ensemble. Repr√©sente l'ensemble du formulaire ou une section.</p>
        <div class="code-block">
          <pre><code>const form = new FormGroup({{ '{' }}
  name: new FormControl(''),
  email: new FormControl('')
{{ '}' }});</code></pre>
        </div>
      </div>

      <div class="feature-card">
        <h3>FormArray</h3>
        <p>G√®re un tableau de contr√¥les. Utile pour les listes dynamiques.</p>
        <div class="code-block">
          <pre><code>const skills = new FormArray([
  new FormControl('Angular'),
  new FormControl('TypeScript')
]);</code></pre>
        </div>
      </div>
    </div>
  </section>

  <section class="doc-section">
    <h2>Configuration de Base</h2>
    <div class="code-block">
      <pre><code>// 1. Import ReactiveFormsModule
import {{ '{' }} ReactiveFormsModule {{ '}' }} from '&#64;angular/forms';

&#64;Component({{ '{' }}
  selector: 'app-my-form',
  standalone: true,
  imports: [ReactiveFormsModule],
  templateUrl: './my-form.component.html'
{{ '}' }})
export class MyFormComponent {{ '{' }}
  // 2. Create form model
  userForm = new FormGroup({{ '{' }}
    firstName: new FormControl('', Validators.required),
    lastName: new FormControl('', Validators.required),
    email: new FormControl('', [
      Validators.required,
      Validators.email
    ])
  {{ '}' }});

  // 3. Handle submission
  onSubmit() {{ '{' }}
    if (this.userForm.valid) {{ '{' }}
      console.log(this.userForm.value);
    {{ '}' }}
  {{ '}' }}
{{ '}' }}</code></pre>
    </div>

    <div class="code-block">
      <pre><code>&lt;!-- Template --&gt;
&lt;form [formGroup]="userForm" (ngSubmit)="onSubmit()"&gt;
  &lt;input formControlName="firstName" placeholder="Pr√©nom"&gt;
  &lt;input formControlName="lastName" placeholder="Nom"&gt;
  &lt;input formControlName="email" placeholder="Email"&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;
    Soumettre
  &lt;/button&gt;
&lt;/form&gt;</code></pre>
    </div>
  </section>

  <section class="doc-section">
    <h2>√âtats du Formulaire</h2>
    <table class="data-table">
      <thead>
        <tr>
          <th>Propri√©t√©</th>
          <th>Description</th>
          <th>Oppos√©</th>
        </tr>
      </thead>
      <tbody>
        @for (state of formStates; track state.property) {
          <tr>
            <td><code>{{ state.property }}</code></td>
            <td>{{ state.description }}</td>
            <td>
              @if (state.property === 'valid') { <code>invalid</code> }
              @if (state.property === 'pristine') { <code>dirty</code> }
              @if (state.property === 'touched') { <code>untouched</code> }
            </td>
          </tr>
        }
      </tbody>
    </table>

    <div class="demo-box">
      <h3>üéÆ D√©mo Interactive</h3>
      <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label>Pr√©nom *</label>
          <input type="text" formControlName="firstName" placeholder="John">
          @if (userForm.get('firstName')?.invalid && userForm.get('firstName')?.touched) {
            <span class="error">Minimum 2 caract√®res requis</span>
          }
        </div>

        <div class="form-group">
          <label>Nom *</label>
          <input type="text" formControlName="lastName" placeholder="Doe">
        </div>

        <div class="form-group">
          <label>Email *</label>
          <input type="email" formControlName="email" placeholder="john&#64;example.com">
          @if (userForm.get('email')?.invalid && userForm.get('email')?.touched) {
            <span class="error">Email invalide</span>
          }
        </div>

        <div class="form-group">
          <label>√Çge</label>
          <input type="number" formControlName="age" placeholder="25">
          @if (userForm.get('age')?.invalid && userForm.get('age')?.touched) {
            <span class="error">√Çge entre 18 et 100</span>
          }
        </div>

        <div class="form-actions">
          <button type="submit" [disabled]="userForm.invalid">Soumettre</button>
          <button type="button" (click)="resetForm()">R√©initialiser</button>
        </div>
      </form>

      <div class="form-state">
        <h4>√âtat actuel :</h4>
        <ul>
          <li>Valid: <strong>{{ userForm.valid }}</strong></li>
          <li>Pristine: <strong>{{ userForm.pristine }}</strong></li>
          <li>Touched: <strong>{{ userForm.touched }}</strong></li>
        </ul>
        <div class="code-block">
          <pre>{{ userForm.value | json }}</pre>
        </div>
      </div>
    </div>
  </section>

  <section class="doc-section">
    <h2>Avantages des Reactive Forms</h2>
    <div class="advantages-grid">
      @for (advantage of advantages; track advantage) {
        <div class="advantage-card">
          <span class="check-icon">‚úì</span>
          <p>{{ advantage }}</p>
        </div>
      }
    </div>
  </section>

  <section class="doc-section">
    <h2>Bonnes Pratiques</h2>
    <div class="practices-container">
      <div class="practice-card good">
        <h3>‚úÖ √Ä Faire</h3>
        <ul>
          <li>D√©finir les contr√¥les dans le composant TypeScript</li>
          <li>Utiliser des validators pour la validation</li>
          <li>G√©rer les erreurs de mani√®re centralis√©e</li>
          <li>D√©sactiver le bouton submit si le formulaire est invalide</li>
          <li>Utiliser FormBuilder pour simplifier la cr√©ation</li>
        </ul>
      </div>

      <div class="practice-card bad">
        <h3>‚ùå √Ä √âviter</h3>
        <ul>
          <li>M√©langer reactive forms et template-driven forms</li>
          <li>Acc√©der directement au DOM pour r√©cup√©rer les valeurs</li>
          <li>Oublier de d√©souscrire des observables</li>
          <li>Ne pas valider les donn√©es c√¥t√© serveur</li>
          <li>Cr√©er des formulaires trop complexes (diviser en sous-composants)</li>
        </ul>
      </div>
    </div>
  </section>

  <section class="doc-section">
    <h2>Ressources</h2>
    <div class="resources-list">
      <a href="https://angular.dev/guide/forms/reactive-forms" target="_blank" class="resource-link">
        üìñ Documentation Officielle - Reactive Forms
      </a>
      <a href="https://angular.dev/api/forms/FormControl" target="_blank" class="resource-link">
        üìñ API Reference - FormControl
      </a>
      <a href="https://angular.dev/api/forms/FormGroup" target="_blank" class="resource-link">
        üìñ API Reference - FormGroup
      </a>
    </div>
  </section>

  <nav class="doc-navigation">
    <a routerLink="/documentation" class="nav-button prev">‚Üê Documentation</a>
    <a routerLink="/documentation/forms/form-builder" class="nav-button next">FormBuilder ‚Üí</a>
  </nav>
</div>
