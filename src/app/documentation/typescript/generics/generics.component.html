<div class="doc-container">
    <nav class="breadcrumb">
        <a routerLink="/home">üè† Accueil</a>
        <span class="separator">‚Ä∫</span>
        <a routerLink="/documentation">üìö Documentation</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">G√©n√©riques TypeScript</span>
    </nav>

    <div class="doc-content">
        <header class="doc-header">
            <h1 class="display-4 mb-3">G√©n√©riques TypeScript</h1>
            <p class="lead text-muted">
                Les g√©n√©riques permettent de cr√©er des composants r√©utilisables qui fonctionnent avec diff√©rents types
                tout en maintenant la s√©curit√© de type. Ils sont essentiels pour √©crire du code flexible et type-safe.
            </p>
        </header>

        <!-- Introduction -->
        <section class="doc-section mb-5">
            <h2 class="section-title">Syntaxe de Base</h2>

            <div class="code-example mb-4">
                <div class="code-header">
                    <span class="language-badge">TypeScript</span>
                    <span class="file-name">Fonction g√©n√©rique simple</span>
                </div>
                <pre><code class="language-typescript">// Sans g√©n√©riques (perte de type)
function identityAny(arg: any): any {{ '{' }}
  return arg;
{{ '}' }}

// Avec g√©n√©riques (type pr√©serv√©)
function identity&lt;T&gt;(arg: T): T {{ '{' }}
  return arg;
{{ '}' }}

// Utilisation
const num = identity&lt;number&gt;(42);        // num: number
const str = identity&lt;string&gt;('hello');   // str: string
const auto = identity(true);             // Inf√©rence automatique: boolean
</code></pre>
            </div>

            <div class="alert alert-info">
                <i class="bi bi-info-circle me-2"></i>
                <strong>T</strong> est une variable de type qui repr√©sente n'importe quel type. Les conventions
                courantes sont T, U, V, K (Key), V (Value).
            </div>
        </section>

        <!-- Avantages -->
        <section class="doc-section mb-5">
            <h2 class="section-title">Avantages des G√©n√©riques</h2>

            <div class="row g-4">
                @for (benefit of benefits; track benefit.title) {
                <div class="col-md-4">
                    <div class="card h-100 border-success">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="bi bi-check-circle text-success me-2"></i>
                                {{ benefit.title }}
                            </h5>
                            <p class="card-text">{{ benefit.description }}</p>
                        </div>
                    </div>
                </div>
                }
            </div>
        </section>

        <!-- Types de G√©n√©riques -->
        <section class="doc-section mb-5">
            <h2 class="section-title">Types de G√©n√©riques</h2>

            <div class="row g-4">
                <div class="col-12">
                    <h3 class="h5 mb-3">Fonctions G√©n√©riques</h3>
                    <div class="code-example">
                        <pre><code class="language-typescript">// Fonction avec un type g√©n√©rique
function wrapInArray&lt;T&gt;(value: T): T[] {{ '{' }}
  return [value];
{{ '}' }}

// Fonction avec plusieurs types g√©n√©riques
function pair&lt;T, U&gt;(first: T, second: U): [T, U] {{ '{' }}
  return [first, second];
{{ '}' }}

const result = pair&lt;string, number&gt;('age', 25);  // [string, number]

// Arrow function g√©n√©rique
const map = &lt;T, U&gt;(arr: T[], fn: (item: T) => U): U[] => {{ '{' }}
  return arr.map(fn);
{{ '}' }};
</code></pre>
                    </div>
                </div>

                <div class="col-12">
                    <h3 class="h5 mb-3">Interfaces G√©n√©riques</h3>
                    <div class="code-example">
                        <pre><code class="language-typescript">interface Box&lt;T&gt; {{ '{' }}
  value: T;
{{ '}' }}

const stringBox: Box&lt;string&gt; = {{ '{' }} value: 'hello' {{ '}' }};
const numberBox: Box&lt;number&gt; = {{ '{' }} value: 42 {{ '}' }};

// Interface g√©n√©rique avec m√©thodes
interface Repository&lt;T&gt; {{ '{' }}
  getAll(): T[];
  getById(id: number): T | undefined;
  create(item: T): T;
  update(id: number, item: T): T;
  delete(id: number): void;
{{ '}' }}
</code></pre>
                    </div>
                </div>

                <div class="col-12">
                    <h3 class="h5 mb-3">Classes G√©n√©riques</h3>
                    <div class="code-example">
                        <pre><code class="language-typescript">class GenericStorage&lt;T&gt; {{ '{' }}
  private items: T[] = [];

  add(item: T): void {{ '{' }}
    this.items.push(item);
  {{ '}' }}

  get(index: number): T | undefined {{ '{' }}
    return this.items[index];
  {{ '}' }}

  getAll(): T[] {{ '{' }}
    return [...this.items];
  {{ '}' }}
{{ '}' }}

const numberStorage = new GenericStorage&lt;number&gt;();
numberStorage.add(1);
numberStorage.add(2);

const userStorage = new GenericStorage&lt;User&gt;();
userStorage.add({{ '{' }} id: 1, name: 'John' {{ '}' }});
</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contraintes -->
        <section class="doc-section mb-5">
            <h2 class="section-title">Contraintes sur les G√©n√©riques</h2>

            <div class="table-responsive mb-4">
                <table class="table table-hover table-bordered">
                    <thead class="table-warning">
                        <tr>
                            <th style="width: 30%">Type de Contrainte</th>
                            <th>Description</th>
                            <th>Exemple</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (constraint of constraints; track constraint.type) {
                        <tr>
                            <td><strong>{{ constraint.type }}</strong></td>
                            <td>{{ constraint.description }}</td>
                            <td><code class="small">{{ constraint.example }}</code></td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>

            <div class="row g-4">
                <div class="col-md-6">
                    <h3 class="h5 mb-3">Extends Constraint</h3>
                    <div class="code-example">
                        <pre><code class="language-typescript">// T doit avoir une propri√©t√© length
function logLength&lt;T extends {{ '{' }} length: number {{ '}' }}&gt;(arg: T): void {{ '{' }}
  console.log(arg.length);
{{ '}' }}

logLength('hello');     // ‚úÖ string a length
logLength([1, 2, 3]);   // ‚úÖ array a length
logLength(42);          // ‚ùå number n'a pas length

// Contrainte d'interface
interface HasId {{ '{' }}
  id: number;
{{ '}' }}

function getById&lt;T extends HasId&gt;(items: T[], id: number): T | undefined {{ '{' }}
  return items.find(item => item.id === id);
{{ '}' }}
</code></pre>
                    </div>
                </div>

                <div class="col-md-6">
                    <h3 class="h5 mb-3">Keyof Constraint</h3>
                    <div class="code-example">
                        <pre><code class="language-typescript">// K doit √™tre une cl√© de T
function getProperty&lt;T, K extends keyof T&gt;(obj: T, key: K): T[K] {{ '{' }}
  return obj[key];
{{ '}' }}

const person = {{ '{' }}
  name: 'John',
  age: 30,
  email: 'john@example.com'
{{ '}' }};

const name = getProperty(person, 'name');    // ‚úÖ string
const age = getProperty(person, 'age');      // ‚úÖ number
const invalid = getProperty(person, 'xyz'); // ‚ùå Erreur
</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Utility Types -->
        <section class="doc-section mb-5">
            <h2 class="section-title">Utility Types G√©n√©riques</h2>

            <div class="code-example mb-4">
                <div class="code-header">
                    <span class="language-badge">TypeScript</span>
                    <span class="file-name">Types utilitaires built-in</span>
                </div>
                <pre><code class="language-typescript">interface User {{ '{' }}
  id: number;
  name: string;
  email: string;
  password: string;
{{ '}' }}

// Partial - Toutes les propri√©t√©s optionnelles
type PartialUser = Partial&lt;User&gt;;
const update: PartialUser = {{ '{' }} name: 'John' {{ '}' }};  // ‚úÖ

// Required - Toutes les propri√©t√©s obligatoires
type RequiredUser = Required&lt;PartialUser&gt;;

// Readonly - Toutes les propri√©t√©s en lecture seule
type ReadonlyUser = Readonly&lt;User&gt;;

// Pick - S√©lectionner certaines propri√©t√©s
type UserPreview = Pick&lt;User, 'id' | 'name'&gt;;

// Omit - Exclure certaines propri√©t√©s
type UserPublic = Omit&lt;User, 'password'&gt;;

// Record - Cr√©er un type avec cl√©s et valeurs
type UserMap = Record&lt;number, User&gt;;
const users: UserMap = {{ '{' }}
  1: {{ '{' }} id: 1, name: 'John', email: 'john@example.com', password: 'xxx' {{ '}' }}
{{ '}' }};
</code></pre>
            </div>
        </section>

        <!-- Exemples Angular -->
        <section class="doc-section mb-5">
            <h2 class="section-title">G√©n√©riques dans Angular</h2>

            <div class="row g-4">
                <div class="col-md-6">
                    <h3 class="h5 mb-3">Service G√©n√©rique</h3>
                    <div class="code-example">
                        <pre><code class="language-typescript">import {{ '{' }} Injectable {{ '}' }} from '&#64;angular/core';
import {{ '{' }} HttpClient {{ '}' }} from '&#64;angular/common/http';
import {{ '{' }} Observable {{ '}' }} from 'rxjs';

&#64;Injectable({{ '{' }} providedIn: 'root' {{ '}' }})
export class ApiService&lt;T&gt; {{ '{' }}
  constructor(
    private http: HttpClient,
    private baseUrl: string
  ) {{ '{' }}{{ '}' }}

  getAll(): Observable&lt;T[]&gt; {{ '{' }}
    return this.http.get&lt;T[]&gt;(this.baseUrl);
  {{ '}' }}

  getById(id: number): Observable&lt;T&gt; {{ '{' }}
    return this.http.get&lt;T&gt;(`${{ '{' }}this.baseUrl{{ '}' }}/${{ '{' }}id{{ '}' }}`);
  {{ '}' }}

  create(item: T): Observable&lt;T&gt; {{ '{' }}
    return this.http.post&lt;T&gt;(this.baseUrl, item);
  {{ '}' }}
{{ '}' }}
</code></pre>
                    </div>
                </div>

                <div class="col-md-6">
                    <h3 class="h5 mb-3">Composant avec Signal G√©n√©rique</h3>
                    <div class="code-example">
                        <pre><code class="language-typescript">import {{ '{' }} Component, signal {{ '}' }} from '&#64;angular/core';

interface ListState&lt;T&gt; {{ '{' }}
  items: T[];
  loading: boolean;
  error: string | null;
{{ '}' }}

&#64;Component({{ '{' }}...{{ '}' }})
export class GenericListComponent&lt;T&gt; {{ '{' }}
  state = signal&lt;ListState&lt;T&gt;&gt;({{ '{' }}
    items: [],
    loading: false,
    error: null
  {{ '}' }});

  loadItems(items: T[]) {{ '{' }}
    this.state.update(s => ({{ '{' }}
      ...s,
      items,
      loading: false
    {{ '}' }}));
  {{ '}' }}
{{ '}' }}
</code></pre>
                    </div>
                </div>

                <div class="col-12">
                    <h3 class="h5 mb-3">FormControl Typ√©</h3>
                    <div class="code-example">
                        <pre><code class="language-typescript">import {{ '{' }} FormControl, FormGroup {{ '}' }} from '&#64;angular/forms';

interface LoginForm {{ '{' }}
  email: string;
  password: string;
  rememberMe: boolean;
{{ '}' }}

// Formulaire typ√©
const loginForm = new FormGroup&lt;{{ '{' }}
  [K in keyof LoginForm]: FormControl&lt;LoginForm[K] | null&gt;
{{ '}' }}&gt;({{ '{' }}
  email: new FormControl(''),
  password: new FormControl(''),
  rememberMe: new FormControl(false)
{{ '}' }});

// Type-safe access
const email: string | null = loginForm.value.email;
</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Best Practices -->
        <section class="doc-section mb-5">
            <h2 class="section-title">Bonnes Pratiques</h2>

            <div class="row g-4">
                <div class="col-md-6">
                    <div class="card border-success h-100">
                        <div class="card-header bg-success text-white">
                            <i class="bi bi-check-circle me-2"></i>√Ä Faire
                        </div>
                        <div class="card-body">
                            <ul class="mb-0">
                                <li>Utiliser des noms significatifs (T, K, V)</li>
                                <li>Ajouter des contraintes quand n√©cessaire</li>
                                <li>Laisser TypeScript inf√©rer quand possible</li>
                                <li>Utiliser les utility types built-in</li>
                                <li>Documenter les param√®tres g√©n√©riques</li>
                                <li>Combiner avec keyof pour type-safety</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card border-danger h-100">
                        <div class="card-header bg-danger text-white">
                            <i class="bi bi-x-circle me-2"></i>√Ä √âviter
                        </div>
                        <div class="card-body">
                            <ul class="mb-0">
                                <li>Utiliser any au lieu de g√©n√©riques</li>
                                <li>Cr√©er trop de param√®tres g√©n√©riques</li>
                                <li>Oublier les contraintes n√©cessaires</li>
                                <li>Utiliser g√©n√©riques sans b√©n√©fice</li>
                                <li>Noms de types non conventionnels</li>
                                <li>G√©n√©raliser trop t√¥t</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Resources -->
        <section class="doc-section mb-5">
            <h2 class="section-title">Ressources</h2>
            <div class="list-group">
                <a href="https://www.typescriptlang.org/docs/handbook/2/generics.html" target="_blank"
                    class="list-group-item list-group-item-action">
                    <i class="bi bi-book me-2"></i>TypeScript Handbook - Generics
                </a>
                <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html" target="_blank"
                    class="list-group-item list-group-item-action">
                    <i class="bi bi-book me-2"></i>TypeScript - Utility Types
                </a>
            </div>
        </section>

        <!-- Navigation -->
        <nav class="doc-navigation mt-5 pt-4 border-top">
            <div class="row">
                <div class="col-6">
                    <a routerLink="/documentation/typescript/interfaces" class="btn btn-outline-secondary">
                        <i class="bi bi-arrow-left me-2"></i>Pr√©c√©dent: Interfaces
                    </a>
                </div>
                <div class="col-6 text-end">
                    <a routerLink="/documentation/typescript/decorators" class="btn btn-primary">
                        Suivant: D√©corateurs<i class="bi bi-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </nav>
    </div>
</div>