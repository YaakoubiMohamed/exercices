<div class="invoice-container">
  <h2>üìÑ G√©n√©rateur de Facture</h2>
  
  <!-- Section 1 : Informations client -->
  <section class="customer-section">
    <h3>üìã Informations Client</h3>
    
    <div class="form-group">
      <label>Nom du client *</label>
      <input 
        type="text"
        [(ngModel)]="customerName"
        placeholder="Nom complet"
        class="input-field">
    </div>
    
    <div class="form-group">
      <label>Email / T√©l√©phone *</label>
      <input 
        type="text"
        [(ngModel)]="customerEmail"
        placeholder="contact@exemple.com"
        class="input-field">
    </div>
    
    <div class="form-group">
      <label>Adresse (optionnelle)</label>
      <textarea 
        [(ngModel)]="customerAddress"
        placeholder="Adresse compl√®te..."
        rows="2"
        class="input-field"></textarea>
    </div>
  </section>

  <!-- Section 2 : Ajout d'articles -->
  <section class="items-section">
    <h3>üõí Articles</h3>
    
    <div class="add-item-form">
      <input 
        type="text"
        [(ngModel)]="newItemName"
        placeholder="Nom de l'article"
        class="input-name">
      
      <input 
        type="number"
        [(ngModel)]="newItemQuantity"
        min="1"
        placeholder="Qt√©"
        class="input-quantity">
      
      <input 
        type="number"
        [(ngModel)]="newItemPrice"
        min="0"
        step="0.01"
        placeholder="Prix unitaire"
        class="input-price">
      
      <button (click)="addItem()" class="btn-add">
        ‚ûï Ajouter
      </button>
    </div>
    
    <!-- Liste des articles -->
    <div class="items-list">
      @for (item of items(); track item.id) {
        <div class="item-row">
          <div class="item-info">
            <span class="item-name">{{ item.name }}</span>
            <span class="item-details">
              {{ item.quantity }} √ó {{ item.unitPrice | currency:'EUR':'symbol':'1.2-2':'fr' }}
            </span>
          </div>
          <div class="item-actions">
            <span class="item-total">
              {{ getLineTotal(item) | currency:'EUR':'symbol':'1.2-2':'fr' }}
            </span>
            <button (click)="removeItem(item.id)" class="btn-remove">
              üóëÔ∏è
            </button>
          </div>
        </div>
      } @empty {
        <p class="empty-state">Aucun article ajout√©</p>
      }
    </div>
  </section>

  <!-- Section 3 : TVA et Calculs -->
  <section class="calculations-section">
    <h3>üí∞ Calculs</h3>
    
    <div class="vat-input">
      <label>Taux de TVA (%)</label>
      <input 
        type="number"
        [(ngModel)]="vatRate"
        min="0"
        max="100"
        step="0.5"
        class="input-vat">
    </div>
    
    <div class="summary">
      <div class="summary-row">
        <span>Articles :</span>
        <span>{{ itemCount() }} article(s)</span>
      </div>
      
      <div class="summary-row">
        <span>Quantit√© totale :</span>
        <span>{{ totalQuantity() }}</span>
      </div>
      
      <div class="summary-row subtotal">
        <span>Sous-total HT :</span>
        <span>{{ subtotal() | currency:'EUR':'symbol':'1.2-2':'fr' }}</span>
      </div>
      
      <div class="summary-row vat">
        <span>TVA ({{ vatRate() }}%) :</span>
        <span>{{ vatAmount() | currency:'EUR':'symbol':'1.2-2':'fr' }}</span>
      </div>
      
      <div class="summary-row total">
        <span>Total TTC :</span>
        <span>{{ total() | currency:'EUR':'symbol':'1.2-2':'fr' }}</span>
      </div>
    </div>
  </section>
</div>
