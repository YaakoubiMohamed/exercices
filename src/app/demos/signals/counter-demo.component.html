<div class="demo-container">
  <header class="demo-header">
    <h2> Signals vs Traditional - Comparison</h2>
    <p class="subtitle">D√©couvrez les avantages des signals pour la r√©activit√©</p>
    <div class="legend">
      <span class="legend-item"><span class="flash-indicator"></span> = D√©tection de changement d√©clench√©e</span>
    </div>
  </header>

  <div class="comparison-grid">
    <!-- LEFT: Traditional Way (Without Signals) -->
    <section class="demo-card traditional" [class.flash-animation]="traditionalFlash()">
      <div class="card-header">
        <h3>‚ùå Sans Signals (Ancienne m√©thode)</h3>
        <span class="badge old">Traditionnel</span>
      </div>
      
      <div class="detection-tracker manual">
        <div class="tracker-label">
          <span>üîß D√©tections Globales</span>
          <span class="tracker-count">{{ traditionalDetectionCount }}</span>
        </div>
        <p class="tracker-note">‚ö†Ô∏è Angular v√©rifie tout le composant √† chaque √©v√©nement</p>
      </div>
      
      <div class="code-preview">
        <pre><code>// Propri√©t√© classique
traditionalCounter = 0;

increment() {{'{'}}>
  this.traditionalCounter++;
  // ‚ö†Ô∏è Angular v√©rifie TOUT
  // le composant (Zone.js)
{{'}'}}</code></pre>
      </div>
      
      <div class="counter-display">
        <h4>Compteur: {{ traditionalCounter }}</h4>
      </div>
      
      <div class="button-group">
        <button (click)="decrementTraditional()" class="btn btn-minus">-</button>
        <button (click)="resetTraditional()" class="btn btn-reset">Reset</button>
        <button (click)="incrementTraditional()" class="btn btn-plus">+</button>
      </div>
      
      <div class="issues">
        <h4>‚ö†Ô∏è Probl√®mes:</h4>
        <ul>
          <li>Change detection v√©rifie TOUT le composant</li>
          <li>Moins performant (v√©rifie m√™me ce qui n'a pas chang√©)</li>
          <li>D√©pend de Zone.js (overhead)</li>
          <li>Pas de r√©activit√© fine-grained</li>
          <li>Calculs inutiles √† chaque √©v√©nement</li>
        </ul>
      </div>
    </section>

    <!-- RIGHT: With Signals (Modern) -->
    <section class="demo-card signals" [class.flash-animation]="signalFlash()">
      <div class="card-header">
        <h3>‚úÖ Avec Signals (Nouvelle m√©thode)</h3>
        <span class="badge new">Angular 20</span>
      </div>
      
      <div class="detection-tracker auto">
        <div class="tracker-label">
          <span>‚ö° D√©tections Automatiques</span>
          <span class="tracker-count">{{ signalDetectionCount() }}</span>
        </div>
        <p class="tracker-note">‚úÖ Mise √† jour automatique - Aucune action requise!</p>
      </div>
      
      <div class="code-preview">
        <pre><code>// Signal
      <div class="counter-display">
        <h4>Compteur: {{ signalCounter() }}</h4>
      </div>{{'{'}}
  // ‚úì Mise √† jour automatique de l'UI!
  this.signalCounter.update(c => c + 1);
{{'}'}}</code></pre>
      </div>
      
      <div class="counter-display highlight">
        <h4>Compteur: {{ signalCounter() }}</h4>
      </div>
      
      <div class="button-group">
        <button (click)="decrementSignal()" class="btn btn-minus">-</button>
        <button (click)="resetSignal()" class="btn btn-reset">Reset</button>
        <button (click)="incrementSignal()" class="btn btn-plus">+</button>
      </div>
      
      <div class="benefits">
        <h4>‚úÖ Avantages:</h4>
        <ul>
          <li>R√©activit√© fine-grained (met √† jour UNIQUEMENT ce qui change)</li>
          <li>Performances optimales (pas de v√©rifications inutiles)</li>
          <li>Pas besoin de Zone.js</li>
          <li>Code plus simple et pr√©visible</li>
          <li>Typage fort avec TypeScript</li>
          <li>Future de Angular (zoneless apps)</li>
        </ul>
      </div>
    </section>
  </div>

  <section class="visual-explanation">
    <h3>üé¨ Ce qui se passe visuellement</h3>
    <div class="flow-diagram">
      <div class="flow-column">
        <h4>‚ùå Approche Traditionnelle</h4>
        <div class="flow-steps">
          <div class="flow-step">1Ô∏è‚É£ Clic sur bouton</div>
          <div class="arrow">‚Üì</div>
          <div class="flow-step">2Ô∏è‚É£ Modification de la propri√©t√©</div>
          <div class="arrow">‚Üì</div>
          <div class="flow-step warning">3Ô∏è‚É£ ‚ö†Ô∏è Zone.js d√©tecte l'√©v√©nement</div>
          <div class="arrow">‚Üì</div>
          <div class="flow-step manual">4Ô∏è‚É£ V√©rifie TOUT le composant</div>
          <div class="arrow">‚Üì</div>
          <div class="flow-step">5Ô∏è‚É£ UI mise √† jour (overhead!)</div>
        </div>
      </div>
      
      <div class="flow-column">
        <h4>‚úÖ Approche Signals</h4>
        <div class="flow-steps">
          <div class="flow-step">1Ô∏è‚É£ Clic sur bouton</div>
          <div class="arrow">‚Üì</div>
          <div class="flow-step">2Ô∏è‚É£ Signal.update()</div>
          <div class="arrow">‚Üì</div>
          <div class="flow-step success">3Ô∏è‚É£ ‚úÖ UI mise √† jour automatiquement!</div>
          <div class="spacer"></div>
          <div class="spacer"></div>
        </div>
      </div>
    </div>
  </section>

  <section class="explanation">
    <h3>üí° Pourquoi les Signals sont meilleurs ?</h3>
    <div class="explanation-grid">
      <div class="explanation-card">
        <div class="icon"></div>
        <h4>R√©activit√© Fine-Grained</h4>
        <p>Les signals permettent √† Angular de savoir exactement quelle partie de l'UI doit √™tre mise √† jour, sans recalculer tout le composant.</p>
      </div>
      
      <div class="explanation-card">
        <div class="icon"></div>
        <h4>Performance</h4>
        <p>Pas besoin de Zone.js ni de change detection globale. Seuls les √©l√©ments qui d√©pendent du signal sont mis √† jour.</p>
      </div>
      
      <div class="explanation-card">
        <div class="icon"></div>
        <h4>Pr√©visibilit√©</h4>
        <p>La r√©activit√© est garantie. Impossible d'avoir une UI d√©synchronis√©e car chaque modification d√©clenche automatiquement la mise √† jour.</p>
      </div>
      
      <div class="explanation-card">
        <div class="icon"></div>
        <h4>Simplicit√©</h4>
        <p>Code plus court, plus lisible, moins de boilerplate. Pas besoin d'injecter des services ou d'appeler des m√©thodes manuellement.</p>
      </div>
    </div>
  </section>

  <section class="code-comparison">
    <h3> Comparaison de Code</h3>
    <div class="comparison-table">
      <div class="table-row header">
        <div>Aspect</div>
        <div>Sans Signals</div>
        <div>Avec Signals</div>
      </div>
      <div class="table-row">
        <div><strong>D√©claration</strong></div>
        <div><code>counter = 0;</code></div>
        <div><code>counter = signal(0);</code></div>
      </div>
      <div class="table-row">
        <div><strong>Lecture</strong></div>
        <div><code>this.counter</code></div>
        <div><code>this.counter()</code></div>
      </div>
      <div class="table-row">
        <div><strong>Mise √† jour</strong></div>
        <div><code>this.counter++; this.cdr.markForCheck();</code></div>
        <div><code>this.counter.update(c => c + 1);</code></div>
      </div>
      <div class="table-row">
        <div><strong>Template</strong></div>
        <div><code>{{ "{{ counter }}" }}</code></div>
        <div><code>{{ "{{ counter() }}" }}</code></div>
      </div>
      <div class="table-row">
        <div><strong>D√©pendances</strong></div>
        <div>ChangeDetectorRef requis</div>
        <div>Aucune d√©pendance</div>
      </div>
    </div>
  </section>
</div>
